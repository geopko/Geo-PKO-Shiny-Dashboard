mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes))) %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(Troop.Compo = str_c(trooptypes, collapse=", ")) %>% ungroup() %>%
mutate(no.tcc=ifelse(is.na(no.tcc), "Unknown", no.tcc)) %>%
select(-ID)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
filter(binary==1) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes)))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary")
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
filter(binary==1) %>%
pull(binary) %>% levels()
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
filter(binary==1) %>%
pull(binary) %>% factor()
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary")
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>% distinct(binary)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
#  filter(binary==1) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes))) %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(Troop.Compo = str_c(trooptypes, collapse=", ")) %>% ungroup() %>%
mutate(no.tcc=ifelse(is.na(no.tcc), "Unknown", no.tcc)) %>%
select(-ID)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
#filter(binary==1) %>%
# mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
#                             trooptypes == "inf" ~ "Infantry",
#                             trooptypes == "he.sup" ~ "Helicopter Support",
#                             trooptypes == "avia" ~ "Aviation",
#                             trooptypes == "mp" ~ "Military Police",
#                             trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
#                             trooptypes == "recon" ~ "Reconnaissance",
#                             trooptypes == "maint" ~ "Maintenance",
#                             trooptypes == "med" ~ "Medical",
#                             trooptypes == "eng" ~ "Engineer",
#                             trooptypes == "fpu" ~ "Formed Police Unit",
#                             trooptypes == "fp" ~ "Force Protection",
#                             trooptypes == "riv" ~ "Riverine",
#                             trooptypes == "sig" ~ "Signal",
#                             trooptypes == "trans" ~ "Transport",
#                             trooptypes == "other.type" ~ "Others",
#                             trooptypes == "eng" ~ "Engineer",
#                             TRUE ~ as.character(trooptypes))) %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(Troop.Compo = str_c(trooptypes, collapse=", ")) %>% ungroup() %>%
mutate(no.tcc=ifelse(is.na(no.tcc), "Unknown", no.tcc)) %>%
select(-ID)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary")
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID) %>%
mutate(dc = sum(binary, na.rm=TRUE))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE))
View(test)
View(test)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>% distinct(dc)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>% pull(dc) %>% distinct()
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>% pull(dc)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) -> test3
View(test3)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes))) %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(Troop.Compo = str_c(trooptypes, collapse=", ")) %>% ungroup() %>%
mutate(no.tcc=ifelse(is.na(no.tcc), "Unknown", no.tcc)) %>%
select(-ID)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes)))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes))) -> test3
View(test3)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
summarise(dc = sum(as.numeric(binary), na.rm=TRUE)) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes)))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE)) %>%
mutate(trooptypes=case_when(trooptypes == "sf" ~ "Special Forces",
trooptypes == "inf" ~ "Infantry",
trooptypes == "he.sup" ~ "Helicopter Support",
trooptypes == "avia" ~ "Aviation",
trooptypes == "mp" ~ "Military Police",
trooptypes == "uav" ~ "Unmanned Aerial Vehicles",
trooptypes == "recon" ~ "Reconnaissance",
trooptypes == "maint" ~ "Maintenance",
trooptypes == "med" ~ "Medical",
trooptypes == "eng" ~ "Engineer",
trooptypes == "fpu" ~ "Formed Police Unit",
trooptypes == "fp" ~ "Force Protection",
trooptypes == "riv" ~ "Riverine",
trooptypes == "sig" ~ "Signal",
trooptypes == "trans" ~ "Transport",
trooptypes == "other.type" ~ "Others",
trooptypes == "eng" ~ "Engineer",
TRUE ~ as.character(trooptypes)))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))  %>% ungroup() %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(troop.compo = case_when(
dc > 0 ~ str_c(trooptypes, collapse=", "),
TRUE ~ "Data on troop types not available for this location"
))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))  %>% ungroup() %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(troop.compo = case_when(
dc > 0 ~ str_c(trooptypes, collapse=", "),
TRUE ~ "Data on troop types not available for this location" %>% ungroup()
))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))  %>% ungroup() %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(troop.compo = case_when(
dc > 0 ~ str_c(trooptypes, collapse=", "),
TRUE ~ "Data on troop types not available for this location"
))
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))  %>% ungroup() %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(troop.compo = case_when(
dc > 0 ~ str_c(trooptypes, collapse=", "),
TRUE ~ "Data on troop types not available for this location"
)) -> test4
View(test4)
View(test4)
test %>% tibble::rowid_to_column("ID") %>%
select(ID, location, no.troops, no.tcc, rpf:uav, other.type, -rpf.no,
-inf.no, -fpu.no, -res.no, -fp.no) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
group_by(ID, location, no.troops, no.tcc, trooptypes) %>%
mutate(dc = sum(as.numeric(binary), na.rm=TRUE))  %>%
group_by(ID, location, no.troops, no.tcc) %>%
summarize(troop.compo = case_when(
dc > 0 ~ str_c(trooptypes, collapse=", "),
TRUE ~ "Data on troop types not available for this location"
)) -> test4
View(test4)
runApp()
map_df %>% filter(Mission=="BINUB") -> test
map_df %>% filter(mission=="BINUB") -> test
View(test)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
library(readxl)
library(readr)
geopko2 <- readxl::read_xlsx("Geo_PKO_v2.0.xlsx", col_types="text")
geopko2 <- readxl::read_xlsx("Geo_PKO_v.2.0.xlsx", col_types="text")
View(geopko2)
write_excel_csv(geopko2, "Geo_PKO_v.2.0.csv")
geopko3 <- readr::read_csv("Geo_PKO_v.2.0.csv")
View(geopko3)
shiny::runApp()
runApp()
rsconnect::setAccountInfo(name='geopko', token='C0C48F10F5F800AC83349FF38E5CBF0F', secret='F9Cu9DARdAGevbUw50M3lUOGLUqzapDsYZwkA2De')
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
library(rsconnect)
deployApp(account="geopko")
runApp()
deployApp(account="geopko")
runApp()
deployApp(account="geopko")
deployApp(account="geopko")
runApp()
install.packages("shinyjs")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
geopko <- readr::read_csv("Geo_PKO_v2.0_ISO3.csv", col_types = cols(.default="c"))
geopko %>%
mutate_at(vars(c(no.troops, no.tcc, longitude, latitude,
unmo.dummy, unpol.dummy)), as.numeric) %>%
mutate(hq=as.factor(hq)) %>%
select(source, mission, year, month, MonthName,
no.troops, nameoftcc_1:notroopspertcc_17) %>%
group_by(source, mission, year, month, MonthName) %>%
mutate(Total.troops=sum(no.troops, na.rm=T)) %>% ungroup() %>%
pivot_longer(c(nameoftcc_1:notroopspertcc_17), names_to=c(".value", "tcc_id"), names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
select(-tcc_id) %>%
group_by(source, mission, year, MonthName, Total.troops, nameoftcc)%>%
summarise(total.tcc=as.character(sum(notroopspertcc), na.rm=TRUE)) %>%
add_count(source, name="No.TCC") %>%
mutate(total.tcc=ifelse(is.na(total.tcc), "size unknown", total.tcc),
overview=paste0(nameoftcc," (",total.tcc,")")) %>%
group_by(source, mission, year, MonthName, Total.troops, No.TCC) %>%
summarise(details=str_c(overview, collapse=", ")) %>%
arrange(desc(year))
geopko %>%
mutate_at(vars(c(no.troops, no.tcc, longitude, latitude,
unmo.dummy, unpol.dummy)), as.numeric) %>%
mutate(hq=as.factor(hq)) %>%
select(source, mission, year, month, MonthName,
no.troops, nameoftcc_1:notroopspertcc_17) %>%
group_by(source, mission, year, month, MonthName) %>%
mutate(Total.troops=sum(no.troops, na.rm=T)) %>% ungroup()
pivot_longer(c(nameoftcc_1:notroopspertcc_17), names_to=c(".value", "TCC_id"), names_sep="_")%>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
select(-TCC_id) %>%
group_by(source, mission, year, month, Total.troops, nameoftcc)%>%
summarise(total.each.tcc=as.character(sum(notroopspertcc, na.rm=TRUE))) %>%
add_count(source, name="No.TCC") %>%
mutate(total.each.tcc=ifelse(total.each.tcc=="0","size unknown", total.each.tcc),
overview=paste0(nameoftcc," (",total.each.tcc,")")) %>%
select(-nameoftcc, -total.each.tcc) %>%
group_by(source, mission, year, month, Total.troops, No.TCC) %>%
summarise(byyear.overview=str_c(overview, collapse=", "))
View(geopko)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
