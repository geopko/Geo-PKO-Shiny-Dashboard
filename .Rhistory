write.csv(map_df2, "Geo_PKO_v2_ISO3.csv")
runApp()
runApp()
map_df2 %>% filter(Mission=="MINURCA") -> test
View(test)
map_df2 %>% filter(Mission=="MINURCA") -> test
map_df2 %>% filter(Mission=="MINURCA") -> test
View(test)
runApp()
runApp()
runApp()
geopko <- readr::read_csv("Geo_PKO_v2.csv", col_types = cols(.default="c"),
locale=readr::locale(encoding="latin1"))
map_df <- geopko %>%
mutate_at(vars(c(No.troops, No.TCC, longitude, latitude,
UNMO.dummy, UNPOL.dummy)), as.numeric) %>%
mutate(HQ=as.factor(HQ))
#appending ISO code to the dataset
ISO_df <- codelist %>% select(cown, iso3c) %>% mutate_all(as.character)
map_df <- left_join(map_df, ISO_df, by=c("cow_code"="cown"))
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
Mission == "UNFICYP" ~ "CYP, XNC",
TRUE ~ as.character(iso3c)),
month = as.numeric(month),
MonthName = as.character(month(month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
write.csv(map_df2, "Geo_PKO_v2_ISO3.csv")
runApp()
length(test)
runApp()
runApp()
runApp()
runApp()
runApp()
950*^(1/2)
950^(1/2)
950^(1/3)
950^(1/4)
1380^(1/3)
test %>% pull(No.TCC)
test %>% pull(No.troops) %>%  ^1/3
test %>% pull(No.troops) -> test2
test2^1/3
test %>% pull(No.troops) %>%  `^`(1/3)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
>>>>>>> 501514a4beb2e83870620f246224a1d0c772bd8c
runApp()
runApp()
runApp()
test2 %>%  `^`(1/3) -> test3
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
testp <- ggplot() geom_point(data=test %>% slice(1),
aes(x=longitude, y=latitude, color=as.integer(No.TCC), size="Custom"),
shape=20, alpha = 0.8)
testp <- ggplot()+ geom_point(data=test %>% slice(1),
aes(x=longitude, y=latitude, color=as.integer(No.TCC), size="Custom"),
shape=20, alpha = 0.8)
testp
testp <- ggplot()+ geom_point(data=test %>% slice(1),
aes(x=longitude, y=latitude, color=as.integer(No.TCC), size="Custom"),
shape=20, alpha = 0.8)+
scale_size_manual(name="Size of deployment", values=c("Custom"=size_for_nrow1()))
test %>% pull(No.troops) %>%  slice(1) %>%  `^`(1/3)
test %>% pull(No.troops) %>%  slice(1) %>%  `^`(1/3) -> sizen
test %>% slice(1) pull(No.troops) %>%  `^`(1/3) -> sizen
test %>% slice(1) %>%  pull(No.troops) %>%  `^`(1/3) -> sizen
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
map_df2 %>% filter(Mission=="MINURSO") -> test
View(test)
runApp()
runApp()
runApp()
runApp()
test4 <- c(0, 0, 0, 0, 0)
max(test4)
runApp()
runApp()
runApp()
runApp()
View(test)
test %>%  filter(location == "Laayoune")
test %>%  filter(location == "Laayoune") -> test5
View(test5)
test %>%  tibble::rowid_to_column("ID") %>%
select(ID, location, No.troops, No.TCC, RPF:UAV, Other.Type, -RPF, -RPF_No,
-Inf_No, -FPU_No, -RES_No, -FP_No) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
filter(binary==1) %>%
mutate(trooptypes=ifelse(trooptypes=="Other.Type", "Others", trooptypes)) %>%
group_by(ID, location, No.troops, No.TCC) %>%
summarize(Troop.Compo = str_c(trooptypes, collapse=", ")) %>% ungroup() %>%
select(-ID) -> testtable
test %>%  tibble::rowid_to_column("ID") %>%
select(ID, location, No.troops, No.TCC, RPF:UAV, Other.Type, -RPF_No,
-Inf_No, -FPU_No, -RES_No, -FP_No) %>%
mutate(across(everything(), as.character)) %>%
pivot_longer(5:23, names_to="trooptypes", values_to="binary") %>%
filter(binary==1) %>%
mutate(trooptypes=case_when(trooptypes == "Other.Type" ~ "Others",
trooptypes == "SF" ~ "Special Forces",
trooptypes == "Inf" ~ "Infantry",
TRUE ~ as.character(trooptypes))) %>%
group_by(ID, location, No.troops, No.TCC) %>%
summarize(Troop.Compo = str_c(trooptypes, collapse=", ")) %>% ungroup() %>%
mutate(No.TCC=ifelse(is.na(No.TCC), "Unknown", No.TCC)) %>%
select(-ID) -> testtable
View(testtable)
runApp()
runApp()
?max
runApp()
runApp()
<<<<<<< HEAD
runApp('ShinyTwotabs.R')
shiny::runApp()
runApp()
geopko <- geopko %>%
mutate_at(vars(c(No.troops, No.TCC, Longitude, Latitude,
UNMO.dummy, UNPOL.dummy)), as.numeric) %>%
mutate(vars(HQ), as_factor)
runApp()
geopko <- geopko %>%
mutate_at(vars(c(No.troops, No.TCC, Longitude, Latitude,
UNMO.dummy, UNPOL.dummy)), as.numeric) %>%
mutate(HQ=as.factor(HQ))
runApp()
library(shiny); runApp('ShinyTwotabs.R')
runApp('ShinyTwotabs.R')
library(dplyr)
names(geopko)
tcc_df <- geopko %>% select(Source:Location, Latitude, Longitude,
No.TCC:notroopspertcc_17)
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_")
library(tidyr)
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_")
View(tcc_df2)
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%  select(-TCC_id)
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%  select(-TCC_id, -Month) %>%
group_by(Source:nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE))
tcc_df <- geopko %>% select(Source:Location, Latitude, Longitude,
No.TCC:notroopspertcc_17)
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE)) %>%
mutate(single.tcc=paste0(nameofTCC, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE)) %>%
mutate(single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc))
library(stringr)
tcc_df <- geopko %>% select(Source:Location, Latitude, Longitude,
No.TCC:notroopspertcc_17)
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE)) %>%
mutate(single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE)) %>%
mutate(single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc))
tcc_df2 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=sum(notroopspertcc, na.rm=TRUE)) %>%
mutate(single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric)
View(tcc_df3)
summarise(count.per.tcc.year=max(notroopspertcc) %>%
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=max(notroopspertcc))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=max(notroopspertcc))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=max(notroopspertcc))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=max(notroopspertcc)) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", as.numeric(count.per.tcc.year)),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Source, Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
write.csv(tcc_df3, "tcc_dataframe.csv")
tcc_df3 %>% filter(Mission=="UNOCI") %>% arrange(Year, Location)
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, No.TCC, nameoftcc) %>%
arrange(desc(No.TCC)) %>%
slice(1) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 %>% filter(Mission=="UNOCI") %>% arrange(Year, Location)
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc)))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
count(Mission, Year, Location, Latitude, Longitude) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(Mission, Year, Location, Latitude, Longitude) %>%
group_by(Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
group_by(Mission, Year, Location, Latitude, Longitude) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")")))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(Year, Location)
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(Year, Location, name=No.TCC)%>%
group_by(Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
tcc_df3 <- tcc_df %>% pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(Mission, Year, Location, Latitude, Longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(Year, Location, name="No.TCC")%>%
group_by(Mission, Year, Location, Latitude, Longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
write.csv(tcc_df3, "tcc_dataframe.csv")
geopko %>% filter(Location=="UNPA")
duplicated(tcc_df3, by=c("Year", "Location"))
anyDuplicated(tcc_df3, by=c("Year", "Location"))
uniqueN(tcc_df3, by=c("Year", "Location"))
=======
>>>>>>> 501514a4beb2e83870620f246224a1d0c772bd8c
shiny::runApp()
install.packages("dplyr", repos = "http://cran.us.r-project.org")
install.packages("dplyr", repos = "http://cran.us.r-project.org")
install.packages("dplyr", repos = "http://cran.us.r-project.org")
install.packages("dplyr", repos = "http://cran.us.r-project.org")
shiny::runApp()
install.packages("gganimate")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(test)
View(test5)
View(test5)
any(test5$No.troops) >0
all(test5$No.troops) =0
all(test5$No.troops) == 0
all(test5$No.troops, na.rm=TRUE) == 0
all(as.numeric(test5$No.troops, na.rm=TRUE)) == 0
shiny::runApp()
geopko %>% group_by(Mission) %>% filter(all(No.troops)== 0)
geopko %>% group_by(Mission) %>% filter((any(No.troops) > 0))
warnings()
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% filter(any(No.troops)>0)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops, na.rm=TRUE)==0)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops, na.rm=FALSE)==0)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission, Source) %>% filter(any(No.troops, na.rm=FALSE)>0)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission, Source) %>% filter(all(No.troops, na.rm=TRUE)==0)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission, Source) %>% filter(all(No.troops, na.rm=TRUE)==0) -> test6
View(test6)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission, Source) %>% filter(all(No.troops, na.rm=TRUE)==0) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
View(test6)
str(test6)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops, na.rm=TRUE)==0) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
View(test6)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops)==0) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
View(test6)
geopko %>% mutate(No.troops = as.numeric(No.troops)) %>% group_by(Mission) %>% filter(any(No.troops)>0) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
View(test6)
geopko %>% select(Source, Mission, location, No.troops, No.TCC) %>%  anti_join(., test6)
geopko %>% mutate(No.troops = as.integer(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops)==0) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
geopko %>% mutate(No.troops = as.integer(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops)==0, na.rm=TRUE) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
str(geopko)
str(geopko$No.troops)
geopko %>% mutate(No.troops = as.integer(No.troops)) %>% group_by(Mission) %>% filter(all(No.troops)==0, na.rm=TRUE) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
View(test6)
str(test6)
geopko %>% mutate(No.troops = as.integer(No.troops)) %>% group_by(Mission) %>% filter(any(No.troops)>0, na.rm=TRUE) %>%  select(Source, Mission, location, No.troops, No.TCC) -> test6
View(test6)
test7 <- anti_join(geopko, test6)
geopko %>% mutate(No.troops=as.integer(No.troops)) %>% anti_join(., test6)
geopko %>% mutate(No.troops=as.integer(No.troops)) %>% anti_join(., test6) -> test7
View(test7)
geopko %>% select(Source, Mission, location, No.troops, No.TCC) %>% mutate(No.troops=as.integer(No.troops)) %>% anti_join(., test6) -> test7
View(test7)
distinct(test7$Mission)
unique(test7$Mission)
geopko %>% group_by(Mission) %>% tally(Source) -> source.count
geopko %>% group_by(Mission) %>% n(Source) -> source.count
geopko %>% group_by(Mission) %>% count(Source) -> source.count
View(source.count)
geopko %>% group_by(Mission) %>% tally(Source) -> source.count
map_df %>% group_by(Mission) %>% tally(timepoint)
map_df %>% group_by(Mission) %>% add_tally(timepoint)
map_df %>% group_by(Mission) %>%  tally()
map_df %>% count(Mission, Source)
map_df %>%  group_by(Mission) %>% tally(distinct(Source))
map_df %>%  group_by(Mission) %>% n_distinct(Source)
View(map_df)
map_df %>%  group_by(Mission) %>% summarise(n_distinct(Source))
map_df %>%  group_by(Mission) %>% summarise(n_distinct(Source)) -> source.count
View(source.count)
