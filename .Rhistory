problems
#### file for mapmaker ####
geopko <- readr::read_csv2("Geo_PKO_v.2.0.csv", col_types = cols(.default="c"))
#### file for mapmaker ####
geopko <- readr::read_csv2("Geo_PKO_v.2.0.csv", col_types = cols(.default="c"))
View(geopko)
geopko %>% filter(mission=="MINUSTAH") %>% distinct(location)
#### file for mapmaker ####
geopko <- readr::read_csv2("Geo_PKO_v.2.0.csv", col_types = cols(.default="c"),
locale=readr::locale(encoding="latin1"))
geopko %>% filter(mission=="MINUSTAH") %>% distinct(location)
#### file for mapmaker ####
geopko <- readr::read_csv2("Geo_PKO_v.2.0.csv", col_types = cols(.default="c"),
locale=readr::locale(encoding="UTF-8"))
geopko %>% filter(mission=="MINUSTAH") %>% distinct(location)
#### file for mapmaker ####
geopko <- readr::read_csv2("Geo_PKO_v.2.0.csv", col_types = cols(.default="c"),
locale=readr::locale(encoding="latin1"))
geopko %>% filter(mission=="UNOCI") %>% distinct(location)
geopko %>% filter(mission=="UNOCI") %>% distinct(location) %>% print(n=Inf)
geopko %>% filter(mission=="MINUGUA") %>% distinct(location) %>% print(n=Inf)
geopko %>% filter(mission=="UNTSO") %>% distinct(location) %>% print(n=Inf)
geopko %>% filter(mission=="UNSMIS") %>% distinct(location) %>% print(n=Inf)
geopko %>% filter(mission=="UNPROFOR") %>% distinct(location) %>% print(n=Inf)
#### file for mapmaker ####
geopko <- readr::read_csv2("Geo_PKO_v.2.0.csv", col_types = cols(.default="c"),
locale=readr::locale(encoding="UTF-8"))
geopko %>% filter(mission=="UNPROFOR") %>% distinct(location) %>% print(n=Inf)
names(geopko)
geopko %>% filter(mission=="MONUSCO") %>% distinct(location) %>% print(n=Inf)
geopko %>% filter(mission=="MINURSO") %>% distinct(location) %>% print(n=Inf)
library(readxl)
geopko2 <- readxl::read_xlsx("Geo_PKO_v.2.0.xlsx", col_types="text")
geopko2 <- readxl::read_xlsx("Geo_PKO_20201113_completed.xlsx", col_types="text")
geopko2 %>% filter(Mission=="UNPROFOR") %>% distinct(Location) %>% print(n=Inf)
geopko2 %>% filter(Mission=="MINUSTAH") %>% distinct(Location) %>% print(n=Inf)
geopko2 %>% filter(Mission=="UNSMIS") %>% distinct(Location) %>% print(n=Inf)
geopko2 %>% filter(Mission=="MINUGUA") %>% distinct(Location) %>% print(n=Inf)
write_excel_csv(geopko2, "test.csv")
geopko3 <- readr::read_csv("test.csv")
geopko3 %>% filter(Mission=="MINUGUA") %>% distinct(Location) %>% print(n=Inf)
geopko3 %>% filter(Mission=="MINUSTAH") %>% distinct(Location) %>% print(n=Inf)
geopko3 %>% filter(Mission=="UNCRO") %>% distinct(Location) %>% print(n=Inf)
geopko3 %>% filter(Mission=="UNPREDEP") %>% distinct(Location) %>% print(n=Inf)
geopko3 %>% filter(Mission=="UNDOF") %>% distinct(Location) %>% print(n=Inf)
geopko3 %>% filter(Mission=="UNOCI") %>% distinct(Location) %>% print(n=Inf)
?read_xlsx
#### file for mapmaker ####
geopko <- read_xlsx("Geo_PKO_v.2.0.xlsx", col_types = c("text"))
library(dplyr)
library(stringr)
library(countrycode)
library(readr)
library(readxl)
#### file for mapmaker ####
geopko <- read_xlsx("Geo_PKO_v.2.0.xlsx", col_types = c("text"))
map_df <- geopko %>%
mutate_at(vars(c(no.troops, no.TCC, longitude, latitude,
unmo.dummy, unmo.dummy)), as.numeric) %>%
mutate(HQ=as.factor(HQ))
#appending ISO code to the dataset
ISO_df <- codelist %>% select(cown, iso3c) %>% mutate_all(as.character)
map_df <- geopko %>%
mutate_at(vars(c(no.troops, no.tcc, longitude, latitude,
unmo.dummy, unmo.dummy)), as.numeric) %>%
mutate(HQ=as.factor(HQ))
map_df <- geopko %>%
mutate_at(vars(c(no.troops, no.tcc, longitude, latitude,
unmo.dummy, unmo.dummy)), as.numeric) %>%
mutate(hq=as.factor(hq))
#appending ISO code to the dataset
ISO_df <- codelist %>% select(cown, iso3c) %>% mutate_all(as.character)
map_df <- left_join(map_df, ISO_df, by=c("cow_code"="cown"))
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ c("CYP","XNC"),
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
month = as.numeric(month),
MonthName = as.character(month(month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
library(tidyr)
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ c("CYP","XNC"),
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
month = as.numeric(month),
MonthName = as.character(month(month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
View(map_df)
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ "CYP, XNC",
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
month = as.numeric(month),
MonthName = as.character(month(month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
?month()
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ "CYP, XNC",
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
Month = as.numeric(month),
MonthName = as.character(month(Month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ "CYP, XNC",
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
Month = as.numeric(month),
MonthName = as.character(months(Month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
library(lubridate)
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ "CYP, XNC",
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
Month = as.numeric(month),
MonthName = as.character(lubridate::month(Month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
View(map_df)
map_df %>% filter(mission=="MINURSO") %>% distinct(iso3c)
map_df %>% filter(mission=="UNFICYP") %>% distinct(iso3c)
map_df %>% filter(mission=="UNMIK") %>% distinct(iso3c)
map_df %>% filter(mission=="UNMEE") %>% distinct(iso3c)
map_df %>% filter(mission=="UNMEE") %>% distinct(iso3c)
map_df %>% filter(mission=="UNMIT") %>% distinct(iso3c)
write.csv(map_df, "Geo_PKO_v2.0_ISO3.csv")
geopko2 <-geopko %>% mutate_at(vars(hesup, inf_no, red_no, avia, heSup, longitude, latitude), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res_no),
Infantry = as.numeric(inf_no))
View(geopko)
geopko2 <-geopko %>% mutate_at(vars(he.sup, inf.no, res.no,
avia,longitude, latitude), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res.no),
Infantry = as.numeric(inf.no))
geopko2$Av<- (geopko2$avia + geopko2$he.sup)
FrontmapData <- geopko2 %>%
select(mission, year, country, location,
latitude, longitude, Infantry,
NoTroops, Reserve, HQ, UNPOL, med, Av, UNMO) %>%
group_by(mission, year, location, country) %>%
mutate(Av = max(Av, na.rm=TRUE),
Med = max(Med, na.rm=TRUE),
Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
Reserve = as.integer(mean(Reserve, na.rm=TRUE)),
UNPOL = max(UNPOL, na.rm=TRUE),
UNMO = max(UNMO, na.rm=TRUE),
ave.no.troops = as.integer(mean(NoTroops, na.rm=TRUE))) %>%
distinct()
FrontmapData <- geopko2 %>%
select(mission, year, country, location,
latitude, longitude, Infantry,
NoTroops, Reserve, hq, UNPOL, med, Av, UNMO) %>%
group_by(mission, year, location, country) %>%
mutate(Av = max(Av, na.rm=TRUE),
Med = max(Med, na.rm=TRUE),
Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
Reserve = as.integer(mean(Reserve, na.rm=TRUE)),
UNPOL = max(UNPOL, na.rm=TRUE),
UNMO = max(UNMO, na.rm=TRUE),
ave.no.troops = as.integer(mean(NoTroops, na.rm=TRUE))) %>%
distinct()
FrontmapData <- geopko2 %>%
select(mission, year, country, location,
latitude, longitude, Infantry,
NoTroops, Reserve, hq, UNPOL, Med, Av, UNMO) %>%
group_by(mission, year, location, country) %>%
mutate(Av = max(Av, na.rm=TRUE),
Med = max(Med, na.rm=TRUE),
Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
Reserve = as.integer(mean(Reserve, na.rm=TRUE)),
UNPOL = max(UNPOL, na.rm=TRUE),
UNMO = max(UNMO, na.rm=TRUE),
ave.no.troops = as.integer(mean(NoTroops, na.rm=TRUE))) %>%
distinct()
geopko2 <-geopko %>% mutate_at(vars(he.sup, inf.no, res.no,
avia,longitude, latitude), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res.no),
Infantry = as.numeric(inf.no),
Med=as.numeric(med))
geopko2$Av<- (geopko2$avia + geopko2$he.sup)
FrontmapData <- geopko2 %>%
select(mission, year, country, location,
latitude, longitude, Infantry,
NoTroops, Reserve, hq, UNPOL, Med, Av, UNMO) %>%
group_by(mission, year, location, country) %>%
mutate(Av = max(Av, na.rm=TRUE),
Med = max(Med, na.rm=TRUE),
Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
Reserve = as.integer(mean(Reserve, na.rm=TRUE)),
UNPOL = max(UNPOL, na.rm=TRUE),
UNMO = max(UNMO, na.rm=TRUE),
ave.no.troops = as.integer(mean(NoTroops, na.rm=TRUE))) %>%
distinct()
View(FrontmapData)
write_csv(FrontmapData, "FrontMap.csv")
#### TCC dataframe (second map) ####
TCCmapData<-geopko2 %>% select(source:location, latitude, longitude,
no.tCC:notroopspertcc_17, hq) %>%
pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%  #dropping empty tcc name cells
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(mission, year, location, latitude, longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(year, location, name="No.TCC")%>%
group_by(Mission, year, location, latitude, longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
#### TCC dataframe (second map) ####
TCCmapData<-geopko2 %>% select(source:location, latitude, longitude,
no.tcc:notroopspertcc_17, hq) %>%
pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%  #dropping empty tcc name cells
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(mission, year, location, latitude, longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(year, location, name="No.TCC")%>%
group_by(Mission, year, location, latitude, longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
#### TCC dataframe (second map) ####
TCCmapData<-geopko2 %>% select(source:location, latitude, longitude,
no.tcc:notroopspertcc_17, hq) %>%
pivot_longer(nameoftcc_1:notroopspertcc_17,
names_to=c(".value", "TCC_id"),
names_sep="_") %>%
filter(!is.na(nameoftcc)) %>%  #dropping empty tcc name cells
mutate_at(vars(notroopspertcc), as.numeric) %>%
group_by(mission, year, location, latitude, longitude, nameoftcc) %>%
summarise(count.per.tcc.year=as.character(max(notroopspertcc))) %>%
mutate(count.per.tcc.year=ifelse(is.na(count.per.tcc.year), "unknown", count.per.tcc.year),
single.tcc=paste0(nameoftcc, " (",count.per.tcc.year,(")"))) %>%
add_count(year, location, name="No.TCC")%>%
group_by(mission, year, location, latitude, longitude, No.TCC) %>%
summarise(year.overview = str_c(single.tcc, collapse=", "))
View(TCCmapData)
write_csv(TCCmapData, "TCCMap.csv")
####Troop type####
TTmapData <- geopko2 %>%
select(source:location, latitude, longitude, infantry, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(infantry = as.integer(mean(infantry, na.rm=TRUE)))%>%
distinct()%>%
drop_na(infantry)
View(geopko2)
####Troop type####
TTmapData <- geopko2 %>%
select(source:location, latitude, longitude, inf, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(inf = as.integer(mean(inf, na.rm=TRUE)))%>%
distinct()%>%
drop_na(inf)
View(TTmapData)
####Troop type####
TTmapData <- geopko2 %>%
select(source:location, latitude, longitude, inf, eng:mp)
####Troop type####
TTmapData <- geopko2 %>%
select(source:location, latitude, longitude, inf, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(inf = as.integer(mean(inf, na.rm=TRUE)))%>%
distinct()
View(TTmapData)
View(map_df)
geopko2 <-geopko %>% mutate_at(vars(he.sup, inf.no, res.no,
avia,longitude, latitude), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res.no),
Infantry = as.numeric(inf.no),
Med=as.numeric(med))
View(geopko2)
names(geopko2)
write_excel_csv(TCCmapData, "TCCMap.csv")
write_excel_csv(FrontmapData, "FrontMap.csv")
####Troop type####
TTmapData <- geopko2 %>%
select(source:location, latitude, longitude, Infantry, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)))%>%
distinct()
View(TTmapData)
####Troop type####
TTmapData <- geopko2 %>%
select(source:location, latitude, longitude, Infantry, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)))%>%
distinct() %>%
drop_na(Infantry)
View(TTmapData)
write_excel_csv(TTmapData, "TTMap.csv")
View(geopko2)
View(geopko2)
####Troop type####
TTmapData <- geopko2 %>%
select(mission:location, latitude, longitude, Infantry, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)))%>%
distinct() %>%
drop_na(Infantry)
library(dplyr)
library(tidyr)
library(stringr)
library(countrycode)
library(readr)
library(readxl)
library(lubridate)
####Troop type####
TTmapData <- geopko2 %>%
select(mission:location, latitude, longitude, Infantry, eng:mp) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)))%>%
distinct() %>%
drop_na(Infantry)
write_excel_csv(TTmapData, "TTMap.csv")
shiny::runApp()
runApp()
geopko <- readr::read_csv("Geo_PKO_v2.0_ISO3.csv", col_types = cols(.default="c"))
names(geopko)
runApp()
runApp()
runApp()
runApp()
runApp()
names(TCCmapData)
names(FrontmapData)
runApp()
runApp()
runApp()
runApp()
runApp()
View(TCCmapData)
View(TTmapData)
View(TCCmapData)
runApp()
####Troop type####
geopko2 <-geopko %>%
mutate_at(vars(inf.no, res.no, longitude, latitude, eng:mp), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res.no),
Infantry = as.numeric(inf.no))
geopko2$Av<- (geopko2$avia + geopko2$he.sup)
geopko2$Av<- as.numeric(geopko2$Av)
TTmapData <- geopko2 %>%
select(mission, year, location, latitude, longitude,
Infantry, eng, med, sig, av, riv, maint, trans) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
eng= sum(eng),
med= sum(med),
sig= sum(sig),
av= sum(av),
riv= sum(riv),
maint= sum(maint),
trans= sum(trans)) %>%
distinct()%>%
drop_na(Infantry)
####Troop type####
geopko2 <-geopko %>%
mutate_at(vars(inf.no, res.no, longitude, latitude, eng:mp), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res.no),
Infantry = as.numeric(inf.no))
geopko2$av<- (geopko2$avia + geopko2$he.sup)
geopko2$av<- as.numeric(geopko2$av)
TTmapData <- geopko2 %>%
select(mission, year, location, latitude, longitude,
Infantry, eng, med, sig, av, riv, maint, trans) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
eng= sum(eng),
med= sum(med),
sig= sum(sig),
av= sum(av),
riv= sum(riv),
maint= sum(maint),
trans= sum(trans)) %>%
distinct()%>%
drop_na(Infantry)
write_excel_csv(TTmapData, "TTMap.csv")
#### file for mapmaker ####
geopko <- read_xlsx("Geo_PKO_v.2.0.xlsx", col_types = c("text"))
library(dplyr)
library(tidyr)
library(stringr)
library(countrycode)
library(readr)
library(readxl)
library(lubridate)
#### file for mapmaker ####
geopko <- read_xlsx("Geo_PKO_v.2.0.xlsx", col_types = c("text"))
####Troop type####
geopko2 <-geopko %>%
mutate_at(vars(inf.no, res.no, longitude, latitude, eng:mp), as.numeric) %>%
mutate(NoTroops = as.numeric(no.troops),
UNPOL = as.numeric(unpol.dummy),
UNMO = as.numeric(unmo.dummy),
Reserve = as.numeric(res.no),
Infantry = as.numeric(inf.no))
geopko2$av<- (geopko2$avia + geopko2$he.sup)
geopko2$av<- as.numeric(geopko2$av)
TTmapData <- geopko2 %>%
select(mission, year, location, latitude, longitude,
Infantry, eng, med, sig, av, riv, maint, trans) %>%
group_by(mission, year, location)%>%
mutate(Infantry = as.integer(mean(Infantry, na.rm=TRUE)),
eng= sum(eng),
med= sum(med),
sig= sum(sig),
av= sum(av),
riv= sum(riv),
maint= sum(maint),
trans= sum(trans)) %>%
distinct()%>%
drop_na(Infantry)
write_excel_csv(TTmapData, "TTMap.csv")
#Data frame for first map
FrontmapData <- readxl::read_xlsx("FrontMap.xlsx", col_types="text")
###TCC dataframe (second map)
TCCmapData <- readxl::read_xlsx("TCCMap.xlsx", col_types="text")
##Troop Type Dataframe (third map)
TTmapData <- readxl::read_xlsx("TTMap.xlsx", col_types="text")
TTmapData <- TTmapData %>%
mutate_at(vars(longitude:trans), as.numeric)
TTmapData <- TTmapData %>%
mutate_at(vars(latitude:trans), as.numeric)
TCCmapData %>% mutate_at(vars(longitude, latitude, No.TCC), as.numeric) -> TCCmapData
FrontmapData <- FrontmapData %>%
mutate_at(vars(latitude:ave.no.troops), as.numeric)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(TCCmapData)
View(TCCmapData)
library(dplyr)
library(tidyr)
library(stringr)
library(countrycode)
library(readr)
library(readxl)
library(lubridate)
#### file for mapmaker ####
geopko <- read_xlsx("Geo_PKO_v.2.0.xlsx", col_types = c("text"))
map_df <- geopko %>%
mutate_at(vars(c(no.troops, no.tcc, longitude, latitude,
unmo.dummy, unmo.dummy)), as.numeric) %>%
mutate(hq=as.factor(hq))
#appending ISO code to the dataset
ISO_df <- codelist %>% select(cown, iso3c) %>% mutate_all(as.character)
map_df <- left_join(map_df, ISO_df, by=c("cow_code"="cown"))
map_df <- map_df %>%
mutate(iso3c = case_when(country == "Ethiopia/Eritrea" ~ "ETH, ERI",
country == "Kosovo" ~ "XKO",
mission == "UNFICYP" ~ "CYP, XNC",
country == "Mauritania" ~ "MRT",
country == "Western Sahara" ~ "ESH",
TRUE ~ as.character(iso3c)),
Month = as.numeric(month),
MonthName = as.character(lubridate::month(Month, label = TRUE, abbr = FALSE))) %>%
unite(joined_date, c("year","MonthName"), sep=": ", remove=FALSE) %>%
unite(timepoint, c("year","MonthName"), sep=" ", remove=FALSE)
write_excel_csv(map_df, "Geo_PKO_v2.0_ISO3.csv")
runApp()
.libPaths()
runApp()
